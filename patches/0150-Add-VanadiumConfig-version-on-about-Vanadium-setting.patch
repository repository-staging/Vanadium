From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: quh4gko8 <88831734+quh4gko8@users.noreply.github.com>
Date: Thu, 17 Jul 2025 07:07:36 +0000
Subject: [PATCH] Add VanadiumConfig version on about Vanadium settings section

---
 .../browser/about_settings/AboutChromeSettings.java   | 11 +++++++++++
 .../android/strings/android_chrome_ext_strings.grdp   |  3 +++
 2 files changed, 14 insertions(+)

diff --git a/chrome/android/java/src/org/chromium/chrome/browser/about_settings/AboutChromeSettings.java b/chrome/android/java/src/org/chromium/chrome/browser/about_settings/AboutChromeSettings.java
index 3e4f90d0d0c4d..857d17ded2a0e 100644
--- a/chrome/android/java/src/org/chromium/chrome/browser/about_settings/AboutChromeSettings.java
+++ b/chrome/android/java/src/org/chromium/chrome/browser/about_settings/AboutChromeSettings.java
@@ -43,6 +43,7 @@ public class AboutChromeSettings extends ChromeBaseSettingsFragment
 
     private static final String PREF_APPLICATION_VERSION = "application_version";
     private static final String PREF_OS_VERSION = "os_version";
+    private static final String PREF_VANADIUM_CONFIG_VERSION = "vanadium_config_version";
     private static final String PREF_LEGAL_INFORMATION = "legal_information";
 
     // Non-translated strings:
@@ -74,6 +75,16 @@ public class AboutChromeSettings extends ChromeBaseSettingsFragment
         p = findPreference(PREF_OS_VERSION);
         assumeNonNull(p);
         p.setSummary(AboutSettingsBridge.getOSVersion());
+        long vanadiumConfigVersion =
+                app.vanadium.config.VanadiumConfParser.getConfigVersionCode();
+        if (vanadiumConfigVersion >= 1) {
+            int order = p.getOrder();
+            p = new LongClickCopySummaryPreference(requireContext(), null);
+            p.setTitle(R.string.vanadium_config_version_title);
+            p.setSummary("" + vanadiumConfigVersion);
+            getPreferenceScreen().addPreference(p);
+            p.setOrder(order);
+        }
         p = findPreference(PREF_LEGAL_INFORMATION);
         assumeNonNull(p);
         Calendar calendar = CalendarFactory.get();
diff --git a/chrome/browser/ui/android/strings/android_chrome_ext_strings.grdp b/chrome/browser/ui/android/strings/android_chrome_ext_strings.grdp
index 97c468723891d..3dc9d0438ec7d 100644
--- a/chrome/browser/ui/android/strings/android_chrome_ext_strings.grdp
+++ b/chrome/browser/ui/android/strings/android_chrome_ext_strings.grdp
@@ -28,6 +28,9 @@
   <message name="IDS_OPEN_LINKS_IN_INCOGNITO_SUMMARY" desc="Summary of opening external links in incognito tabs menu item">
     Open links navigated by external apps in incognito tabs
   </message>
+  <message name="IDS_VANADIUM_CONFIG_VERSION_TITLE" desc="Title of VanadiumConfig version menu item">
+    Vanadium Config version
+  </message>
   <!-- WebRTC toggle -->
   <message name="IDS_WEBRTC_POLICY_TITLE" desc="WebRTC policy setting label">
     WebRTC IP handling policy
