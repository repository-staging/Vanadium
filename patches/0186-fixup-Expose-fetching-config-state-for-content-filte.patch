From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: fgei <fgei@gmail.com>
Date: Sun, 14 Jul 2024 03:26:05 +0000
Subject: [PATCH] fixup! "Expose fetching config state for content filtering to
 native calls"

---
 .../SubresourceFilterFetching.java             |  2 --
 .../subresource_filter_fetching.cc             | 18 ------------------
 .../subresource_filter_fetching.h              |  4 +---
 3 files changed, 1 insertion(+), 23 deletions(-)

diff --git a/components/subresource_filter/android_config/java/src/org/chromium/components/subresource_filter/SubresourceFilterFetching.java b/components/subresource_filter/android_config/java/src/org/chromium/components/subresource_filter/SubresourceFilterFetching.java
index bd702d12432a9..db2d102bd540d 100644
--- a/components/subresource_filter/android_config/java/src/org/chromium/components/subresource_filter/SubresourceFilterFetching.java
+++ b/components/subresource_filter/android_config/java/src/org/chromium/components/subresource_filter/SubresourceFilterFetching.java
@@ -9,12 +9,10 @@ import app.vanadium.config.proto.VanadiumConfigProto.Component.ComponentType;
 @JNINamespace("subresource_filter")
 public class SubresourceFilterFetching {
 
-    @CalledByNative
     public static long getUnindexedRulesetVersion() {
         return VanadiumConfParser.getVersionCodeForComponent(ComponentType.SUBRESOURCE_FILTER_TOOLS);
     }
 
-    @CalledByNative
     public static byte[] getUnindexedRulesetData() {
         return VanadiumConfParser.getByteArrayForComponent(ComponentType.SUBRESOURCE_FILTER_TOOLS);
     }
diff --git a/components/subresource_filter/android_config/subresource_filter_fetching.cc b/components/subresource_filter/android_config/subresource_filter_fetching.cc
index ca345bc361943..ef038eeb1bb31 100644
--- a/components/subresource_filter/android_config/subresource_filter_fetching.cc
+++ b/components/subresource_filter/android_config/subresource_filter_fetching.cc
@@ -7,28 +7,10 @@
 #include <string>
 
 #include "base/android/jni_android.h"
-#include "base/android/jni_array.h"
-#include "base/strings/string_number_conversions.h"
 #include "components/subresource_filter/android_config/subresource_filter_fetching_jni_headers/SubresourceFilterFetching_jni.h"
 
 namespace subresource_filter {
 
-std::string GetUnindexedRulesetVersion() {
-  JNIEnv* env = base::android::AttachCurrentThread();
-  return base::NumberToString(Java_SubresourceFilterFetching_getUnindexedRulesetVersion(env));
-}
-
-std::string GetUnindexedRulesetData() {
-  using base::android::JavaByteArrayToString;
-  using base::android::ScopedJavaLocalRef;
-
-  JNIEnv* env = base::android::AttachCurrentThread();
-  ScopedJavaLocalRef<jbyteArray> arr = Java_SubresourceFilterFetching_getUnindexedRulesetData(env);
-  std::string unindexed_ruleset_data_str;
-  JavaByteArrayToString(env, arr, &unindexed_ruleset_data_str);
-  return unindexed_ruleset_data_str;
-}
-
 bool IsInitialized() {
   JNIEnv* env = base::android::AttachCurrentThread();
   return Java_SubresourceFilterFetching_isInitialized(env);
diff --git a/components/subresource_filter/android_config/subresource_filter_fetching.h b/components/subresource_filter/android_config/subresource_filter_fetching.h
index 80d8054151594..5bf99e865676c 100644
--- a/components/subresource_filter/android_config/subresource_filter_fetching.h
+++ b/components/subresource_filter/android_config/subresource_filter_fetching.h
@@ -8,9 +8,7 @@
 #include <string>
 
 namespace subresource_filter {
-std::string GetUnindexedRulesetVersion();
-std::string GetUnindexedRulesetData();
 bool IsInitialized();
 } // namespace subresource_filter
 
-#endif // COMPONENTS_SUBRESOURCE_FILTER_ANDROID_CONFIG_SUBRESOURCE_FILTER_FETCHING_H_
\ No newline at end of file
+#endif // COMPONENTS_SUBRESOURCE_FILTER_ANDROID_CONFIG_SUBRESOURCE_FILTER_FETCHING_H_
