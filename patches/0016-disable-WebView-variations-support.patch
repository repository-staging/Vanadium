From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: Daniel Micay <danielmicay@gmail.com>
Date: Thu, 10 Dec 2020 10:09:18 -0500
Subject: [PATCH] disable WebView variations support

---
 .../com/android/webview/chromium/WebViewChromiumAwInit.java | 6 ------
 .../webview/chromium/WebViewChromiumFactoryProvider.java    | 4 ----
 2 files changed, 10 deletions(-)

diff --git a/android_webview/glue/java/src/com/android/webview/chromium/WebViewChromiumAwInit.java b/android_webview/glue/java/src/com/android/webview/chromium/WebViewChromiumAwInit.java
index 1dfbbca9ec1b8..dd507aeb2c785 100644
--- a/android_webview/glue/java/src/com/android/webview/chromium/WebViewChromiumAwInit.java
+++ b/android_webview/glue/java/src/com/android/webview/chromium/WebViewChromiumAwInit.java
@@ -665,12 +665,6 @@ public class WebViewChromiumAwInit {
 
                     AwBrowserProcess.configureChildProcessLauncher();
 
-                    // finishVariationsInitLocked() must precede native initialization so
-                    // the seed is available when AwFeatureListCreator::SetUpFieldTrials()
-                    // runs.
-                    if (!FastVariationsSeedSafeModeAction.hasRun()) {
-                        finishVariationsInitLocked();
-                    }
                 });
 
         addBrowserProcessStartTasksToQueue(
diff --git a/android_webview/glue/java/src/com/android/webview/chromium/WebViewChromiumFactoryProvider.java b/android_webview/glue/java/src/com/android/webview/chromium/WebViewChromiumFactoryProvider.java
index ed4a0a7e1064d..3946199d3fcb8 100644
--- a/android_webview/glue/java/src/com/android/webview/chromium/WebViewChromiumFactoryProvider.java
+++ b/android_webview/glue/java/src/com/android/webview/chromium/WebViewChromiumFactoryProvider.java
@@ -661,10 +661,6 @@ public class WebViewChromiumFactoryProvider implements WebViewFactoryProvider {
             // This must happen after pref value has been read and SafeMode setup has completed.
             setupStartupTaskExperiments(androidXConfig);
 
-            if (!FastVariationsSeedSafeModeAction.hasRun()) {
-                mAwInit.startVariationsInit();
-            }
-
             if (WebViewCachedFlags.get()
                     .isCachedFeatureEnabled(AwFeatures.WEBVIEW_MOVE_WORK_TO_PROVIDER_INIT)) {
                 PostTask.postTask(
